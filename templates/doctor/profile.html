{% extends "base.html" %}

{% block title %}My Profile - Hospital Management System{% endblock %}

{% block content %}
<div class="container py-4">
    <!-- Page Header -->
    <div class="row mb-4">
        <div class="col-12">
            <h1 class="display-6 fw-bold">
                <i class="bi bi-person-circle text-primary"></i> My Profile
            </h1>
            <p class="text-muted">View and manage your professional profile</p>
        </div>
    </div>

    <div class="row">
        <!-- Profile Summary Card -->
        <div class="col-lg-4 mb-4">
            <div class="card border-0 shadow-sm">
                <div class="card-body text-center">
                    <div class="avatar-large mx-auto mb-3">
                        {{ doctor.name[0] }}
                    </div>
                    <h3 class="mb-1">Dr. {{ doctor.name }}</h3>
                    <p class="text-muted">{{ doctor.qualification }}</p>
                    <span class="badge bg-primary mb-3">{{ doctor.specialization.name }}</span>

                    {% if doctor.user.is_active %}
                        <span class="badge bg-success mb-3">
                            <i class="bi bi-check-circle"></i> Active
                        </span>
                    {% else %}
                        <span class="badge bg-danger mb-3">
                            <i class="bi bi-x-circle"></i> Inactive
                        </span>
                    {% endif %}

                    <div class="d-grid gap-2 mt-3">
                        <a href="{{ url_for('doctor.edit_profile') }}" class="btn btn-primary">
                            <i class="bi bi-pencil"></i> Edit Profile
                        </a>
                        <a href="{{ url_for('auth.change_password') }}" class="btn btn-outline-secondary">
                            <i class="bi bi-key"></i> Change Password
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile Details -->
        <div class="col-lg-8">
            <!-- Professional Information -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-white">
                    <h5 class="mb-0">
                        <i class="bi bi-person-badge text-success"></i> Professional Information
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="text-muted small">Full Name</label>
                            <p class="fw-bold">Dr. {{ doctor.name }}</p>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="text-muted small">Specialization</label>
                            <p><span class="badge bg-primary fs-6">{{ doctor.specialization.name }}</span></p>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="text-muted small">License Number</label>
                            <p class="fw-bold"><code>{{ doctor.license_number }}</code></p>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="text-muted small">Qualification</label>
                            <p class="fw-bold">{{ doctor.qualification }}</p>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="text-muted small">Experience</label>
                            <p class="fw-bold">
                                {% if doctor.experience_years %}
                                    {{ doctor.experience_years }} years
                                {% else %}
                                    Not specified
                                {% endif %}
                            </p>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="text-muted small">Consultation Fee</label>
                            <p class="fw-bold">
                                {% if doctor.consultation_fee %}
                                    â‚¹{{ doctor.consultation_fee }}
                                {% else %}
                                    Not specified
                                {% endif %}
                            </p>
                        </div>
                        {% if doctor.bio %}
                        <div class="col-12">
                            <label class="text-muted small">Biography</label>
                            <p>{{ doctor.bio }}</p>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Contact Information -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-white">
                    <h5 class="mb-0">
                        <i class="bi bi-telephone text-info"></i> Contact Information
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="text-muted small">Email</label>
                            <p class="fw-bold">
                                <i class="bi bi-envelope"></i> {{ doctor.user.email }}
                            </p>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="text-muted small">Contact Number</label>
                            <p class="fw-bold">
                                <i class="bi bi-phone"></i> {{ doctor.contact_number }}
                            </p>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="text-muted small">Username</label>
                            <p class="fw-bold">{{ doctor.user.username }}</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Statistics -->
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-white">
                    <h5 class="mb-0">
                        <i class="bi bi-graph-up text-warning"></i> Statistics
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row text-center">
                        <div class="col-md-4 mb-3">
                            <div class="p-3 bg-light rounded">
                                <h3 class="mb-0 text-primary">{{ total_patients }}</h3>
                                <p class="text-muted mb-0 small">Total Patients</p>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="p-3 bg-light rounded">
                                <h3 class="mb-0 text-success">{{ completed_appointments }}</h3>
                                <p class="text-muted mb-0 small">Completed</p>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="p-3 bg-light rounded">
                                <h3 class="mb-0 text-info">{{ upcoming_appointments }}</h3>
                                <p class="text-muted mb-0 small">Upcoming</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
